%%%--------------------------------------------------------------------
%%% @doc whois server CLI
%%%--------------------------------------------------------------------
-module(whoisd).
-export([main/1]).

%%--------------------------------------------------------------------
%% @doc main/1
%%--------------------------------------------------------------------
-spec main(Args) -> Result when
      Args :: [list(), ...],
      Result :: any().
main(Args) ->
    main(Args, #{}).

%%--------------------------------------------------------------------
%% @doc main/2
%%--------------------------------------------------------------------
-spec main(Args, Buffer) -> Result when
      Args :: [list(), ...],
      Buffer :: map(),
      Result :: any().
main([], Buffer) ->
    Buffer;
main(["-port", Port|Rest], Buffer) ->
    main(Rest, Buffer#{ port => Port });
main(["-address", Address|Rest], Buffer) ->
    main(Rest, Buffer#{ address => Address }).

%%--------------------------------------------------------------------
%% @doc loop/0
%%--------------------------------------------------------------------
loop() ->
    receive
        _ -> loop()
    end.
             
